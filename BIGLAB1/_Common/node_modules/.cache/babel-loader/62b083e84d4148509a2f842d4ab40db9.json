{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\giang\\\\Desktop\\\\Progetti\\\\Universitari\\\\_WIP\\\\AW1-labs\\\\BIGLAB1\\\\_Common\\\\src\\\\Main.js\",\n    _s = $RefreshSig$();\n\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\nimport { filters, tl } from './data';\nimport { TaskAdder } from './AdderComponents';\nimport TaskList from './TaskComponents';\nimport { Col, Container } from 'react-bootstrap';\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndayjs.extend(utc);\ndayjs.extend(timezone); //dayjs.tz.setDefault(dayjs.tz.guess())\n\nfunction Main(props) {\n  _s();\n\n  const [tasks, setTasks] = useState([...tl]);\n  const [editMode, setEditMode] = useState(-1);\n  const [show, setShow] = useState(false);\n  const [description, setDescription] = useState({\n    value: '',\n    isValid: false\n  });\n  const [isPrivate, setIsPrivate] = useState(false);\n  const [isImportant, setIsImportant] = useState(false);\n  const [date, setDate] = useState({\n    value: '',\n    isValid: false\n  });\n  const [time, setTime] = useState('');\n  const [validated, setValidated] = useState(false);\n\n  const deleteTask = tskID => {\n    setTasks(tsks => tsks.filter(t => t.id !== tskID));\n  };\n\n  const editTask = tskID => {\n    if (tskID >= 0) {\n      const currentTask = tasks.find(task => task.id === tskID); //qui la checkDescValidity dovrebbe essere inutile\n\n      setDescription({\n        value: currentTask.description,\n        isValid: checkDescValidity(currentTask.description)\n      });\n      setIsPrivate(currentTask.isPrivate);\n      setIsImportant(currentTask.isUrgent);\n      setDate({\n        value: currentTask.date.format(\"YYYY-MM-DD\"),\n        isValid: checkDateValidity(currentTask.date)\n      });\n    } else clearForm();\n\n    setEditMode(tskID);\n  };\n\n  const handleShow = () => {\n    setEditMode(-1);\n    setShow(true);\n  };\n\n  const handleClose = () => {\n    setShow(false);\n    setValidated(false);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let id;\n\n    if (description.isValid && date.isValid) {\n      if (editMode >= 0) {\n        id = editMode;\n        deleteTask(id);\n      } else id = tasks.sort((a, b) => a.id - b.id)[tasks.length - 1].id + 1;\n\n      const task = {\n        id: id,\n        description: description.value,\n        isPrivate: isPrivate,\n        isUrgent: isImportant,\n        date: dayjs.tz(`${date.value}T${time}:00.000Z`)\n      };\n      setTasks(tsks => [...tsks, task].sort((a, b) => a.id - b.id));\n      handleClose();\n      clearForm();\n      setEditMode(-1);\n    } else setValidated(true);\n  };\n\n  const handleDescChange = ev => {\n    setDescription({\n      value: ev.target.value,\n      isValid: checkDescValidity(ev.target.value)\n    });\n  };\n\n  const handleDateChange = ev => {\n    setDate({\n      value: ev.target.value,\n      isValid: checkDateValidity(ev.target.value)\n    });\n  };\n\n  const handleTimeChange = (ev, value) => {\n    setTime(value);\n  };\n\n  const checkDescValidity = desc => !!desc;\n\n  const checkDateValidity = date => dayjs(date) >= dayjs().startOf('d');\n\n  const clearForm = () => {\n    setValidated(false);\n    setDescription({\n      value: '',\n      isValid: false\n    });\n    setIsPrivate(false);\n    setIsImportant(false);\n    setDate({\n      value: '',\n      isValid: false\n    });\n    setTime('');\n  };\n\n  const formProps = {\n    editMode,\n    editTask,\n    description,\n    isPrivate,\n    isImportant,\n    date,\n    time,\n    validated,\n    setIsPrivate,\n    setIsImportant,\n    handleSubmit,\n    handleDateChange,\n    handleDescChange,\n    handleTimeChange\n  };\n  return /*#__PURE__*/_jsxDEV(Col, {\n    as: \"main\",\n    lg: 8,\n    className: \"py-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: filters[props.activeFilter - 1].text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 48\n    }, this), /*#__PURE__*/_jsxDEV(TaskList, {\n      tasks: tasks,\n      deleteTask: deleteTask,\n      activeFilter: props.activeFilter,\n      ...formProps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"fixed-bottom d-flex flex-row-reverse px-4 mb-4\",\n      children: /*#__PURE__*/_jsxDEV(TaskAdder, {\n        clearForm: clearForm,\n        show: show,\n        handleShow: handleShow,\n        handleClose: handleClose,\n        ...formProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Main, \"9OA2jVwh3zPgZnYYuUZkOiBRZ7E=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["C:/Users/giang/Desktop/Progetti/Universitari/_WIP/AW1-labs/BIGLAB1/_Common/src/Main.js"],"names":["dayjs","utc","timezone","filters","tl","TaskAdder","TaskList","Col","Container","React","useState","extend","Main","props","tasks","setTasks","editMode","setEditMode","show","setShow","description","setDescription","value","isValid","isPrivate","setIsPrivate","isImportant","setIsImportant","date","setDate","time","setTime","validated","setValidated","deleteTask","tskID","tsks","filter","t","id","editTask","currentTask","find","task","checkDescValidity","isUrgent","format","checkDateValidity","clearForm","handleShow","handleClose","handleSubmit","event","preventDefault","sort","a","b","length","tz","handleDescChange","ev","target","handleDateChange","handleTimeChange","desc","startOf","formProps","activeFilter","text"],"mappings":"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","sourcesContent":["import dayjs from 'dayjs';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport timezone from 'dayjs/plugin/timezone';\r\n\r\nimport {filters, tl} from './data';\r\nimport {TaskAdder} from './AdderComponents';\r\nimport TaskList from './TaskComponents';\r\n\r\nimport {Col, Container} from 'react-bootstrap';\r\n\r\nimport React, { useState } from 'react';\r\n\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n//dayjs.tz.setDefault(dayjs.tz.guess())\r\n\r\nfunction Main(props) {\r\n    const [tasks, setTasks] = useState([...tl]);\r\n    const [editMode, setEditMode] = useState(-1);    \r\n\r\n    const [show, setShow] = useState(false);\r\n    const [description, setDescription] = useState({value: '', isValid: false});\r\n    const [isPrivate, setIsPrivate] = useState(false);\r\n    const [isImportant, setIsImportant] = useState(false);\r\n    const [date, setDate] = useState({value: '', isValid: false});\r\n    const [time, setTime] = useState('');\r\n    const [validated, setValidated] = useState(false);\r\n\r\n    const deleteTask = (tskID) => {\r\n        setTasks(tsks => tsks.filter(t => t.id !== tskID));\r\n    }\r\n\r\n    const editTask = (tskID) => {\r\n        if(tskID >= 0) {\r\n            const currentTask = tasks.find(task => task.id === tskID);\r\n\r\n            //qui la checkDescValidity dovrebbe essere inutile\r\n            setDescription({ value: currentTask.description, isValid: checkDescValidity(currentTask.description) });\r\n            setIsPrivate(currentTask.isPrivate);\r\n            setIsImportant(currentTask.isUrgent);\r\n            setDate({ value: currentTask.date.format(\"YYYY-MM-DD\"), isValid: checkDateValidity(currentTask.date) });\r\n        }\r\n        else clearForm();\r\n\r\n        setEditMode(tskID);\r\n    };\r\n    \r\n    const handleShow = () => {\r\n        setEditMode(-1);\r\n        setShow(true);\r\n    }\r\n    const handleClose = () => {\r\n        setShow(false);\r\n        setValidated(false);\r\n    };\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        let id;        \r\n\r\n        if (description.isValid && date.isValid) {\r\n            if(editMode >= 0) {\r\n                id = editMode;\r\n                deleteTask(id);\r\n            }\r\n            else id = tasks.sort((a, b) => a.id - b.id)[tasks.length - 1].id + 1;\r\n\r\n            const task = { id: id, description: description.value, isPrivate: isPrivate, \r\n                isUrgent: isImportant, date: dayjs.tz(`${date.value}T${time}:00.000Z`)\r\n            };\r\n\r\n            setTasks(tsks => [...tsks, task].sort((a, b) => a.id - b.id));\r\n            handleClose();\r\n            clearForm();\r\n\r\n            setEditMode(-1);\r\n        }\r\n        else setValidated(true);        \r\n    };\r\n\r\n    const handleDescChange = (ev) => {\r\n        setDescription({ value: ev.target.value, isValid: checkDescValidity(ev.target.value) });\r\n    };\r\n\r\n    const handleDateChange = (ev) => {\r\n        setDate({ value: ev.target.value, isValid: checkDateValidity(ev.target.value) });\r\n    };\r\n\r\n    const handleTimeChange = (ev, value) => {\r\n        setTime(value);\r\n    };\r\n\r\n    const checkDescValidity = (desc) => !!desc;\r\n\r\n    const checkDateValidity = (date) => dayjs(date) >= dayjs().startOf('d');\r\n\r\n    const clearForm = () => {\r\n        setValidated(false);\r\n        setDescription({value: '', isValid: false});\r\n        setIsPrivate(false);\r\n        setIsImportant(false);\r\n        setDate({value: '', isValid: false});\r\n        setTime('');\r\n    };\r\n    \r\n    const formProps = {\r\n        editMode, editTask, description, isPrivate, isImportant, date, time, validated,\r\n        setIsPrivate, setIsImportant, handleSubmit, handleDateChange, handleDescChange, handleTimeChange\r\n    };\r\n\r\n    return (\r\n        <Col as=\"main\" lg={8} className=\"py-3\"><h1>{filters[props.activeFilter - 1].text}</h1>\r\n            <TaskList tasks={tasks} deleteTask={deleteTask} activeFilter={props.activeFilter} {...formProps} />\r\n            <Container fluid className=\"fixed-bottom d-flex flex-row-reverse px-4 mb-4\">\r\n                <TaskAdder clearForm={clearForm} show={show} handleShow={handleShow} handleClose={handleClose} {...formProps} />\r\n            </Container>\r\n        </Col>\r\n    );\r\n}\r\n\r\nexport default Main;"]},"metadata":{},"sourceType":"module"}